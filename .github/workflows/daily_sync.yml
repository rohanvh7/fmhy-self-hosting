name: Daily Upstream Sync

on:
  schedule:
    # This runs at 00:00 UTC (12:00 AM) every day
    - cron: '0 0 * * *'
  workflow_dispatch: # Allows you to run it manually to test

jobs:
  sync_latest_from_upstream:
    runs-on: ubuntu-latest
    if: github.repository == 'rohanvh7/fmhy-self-hosting'

    steps:
      - name: Checkout target repo
        uses: actions/checkout@v4
        with:
          # Ensure we use a token that can push to the fork
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: Sync Upstream
        uses: wei/pull@v3
        with:
          target_group: rohanvh7
          target_branch: main
          upstream_repo: fmhy/edit
          upstream_branch: main
          force: false # Change to true if you want to overwrite your own changes
